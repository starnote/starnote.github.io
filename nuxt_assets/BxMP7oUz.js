import{_ as D}from"./Ch1fNMSO.js";import{_ as E}from"./Ok3NDjcB.js";import{_ as L}from"./BMnQ5drx.js";import{l as R}from"./CFDgI7c6.js";import{u as $}from"./CvffFt6_.js";import{aA as G,i as H,ap as K,ah as P,a3 as T,e as c,ai as f,aj as r,an as F,am as m,ao as t,ak as y,al as x,R as j,at as q,az as z,av as I,aq as M,ad as J}from"./BhKvcAwN.js";import{g as S}from"./BNGwdjm8.js";import{N as O,a as Q}from"./DIc5dLEI.js";import"./BJ2ClxiI.js";import"./Bk_rJcZu.js";import"./C5Ksf8W7.js";const U="$s";function W(...l){const h=typeof l[l.length-1]=="string"?l.pop():void 0;typeof l[0]!="string"&&l.unshift(h);const[e,a]=l;if(!e||typeof e!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+e);if(a!==void 0&&typeof a!="function")throw new Error("[nuxt] [useState] init must be a function: "+a);const v=U+e,i=G(),u=H(i.payload.state,v);if(u.value===void 0&&a){const d=a();if(K(d))return i.payload.state[v]=d,d;u.value=d}return u}const X={subContainer:""},Y={key:0},Z={key:1},ee={key:2,class:"bottomback"},te={class:"notestyle"},ae=["src"],oe={"text-center":""},se={key:3,"text-center":""},ne=["src"],re={key:4,"text-center":"","m-b-10":""},ye={__name:"index",setup(l){let{message:h}=P(["message"]);$({title:"星空笔记"});let e=[],a=c(),v=c(!1),i=c(!1),u=c(!0),d=c(null),N=c(!1),b=20,B=20,w=c(0);const k=W("created"),V=async()=>{const{data:o,pending:s,error:p}=await S("/starnoteapi/starnotes/"+b+"/0");if(p.value&&h.error(`失败！
`+p.value,{duration:5e3}),o.value){u.value=!1;let n=o.value.result;for(let _ in n)e.push(n[_]);a.value=e,k.value=e,n.length==b&&(i.value=!0)}},A=async()=>{N.value=!0,i.value=!1,v.value=!0,w.value+=B;const{data:o,pending:s,error:p}=await S("/starnoteapi/starnotes/"+b+"/"+w.value);if(p.value&&h.error(`失败！
`+p.value,{duration:5e3}),o.value){N.value=!1;let n=o.value.result;if(n.length==0){h.info("没有更多数据了",{duration:5e3});return}for(let _ in n)e.push(n[_]);a.value=e,k.value=e,n.length==b&&(i.value=!0,v.value=!1)}};return T(()=>{if(k.value){u.value=!1,a.value=k.value;let o=k.value;w.value=o.length;for(let s in o)e.push(o[s])}else V()}),(o,s)=>{const p=D,n=E,_=L;return r(),f("div",X,[t(u)?(r(),f("div",Y,[y(p)])):t(d)?(r(),f("div",Z,[y(n,{error:t(d)},null,8,["error"])])):(r(),f("div",ee,[m("div",null,[y(t(Q),{"x-gap":"20",cols:"16","item-responsive":"",responsive:"screen"},{default:x(()=>[(r(!0),f(j,null,q(t(a),(g,C)=>(r(),z(t(O),{span:"8 l:4",key:C},{default:x(()=>[m("div",te,[y(_,{to:"/note/@"+g.author+"/"+g.permlink},{default:x(()=>[m("img",{width:"98%","mt-3":"",src:g.coverimg,"rounded-2":""},null,8,ae)]),_:2},1032,["to"]),y(_,{to:"/note/@"+g.author+"/"+g.permlink},{default:x(()=>[m("p",oe,I(g.title),1)]),_:2},1032,["to"])])]),_:2},1024))),128))]),_:1})])])),t(N)?(r(),f("div",se,[m("img",{src:t(R),alt:"miao loading"},null,8,ne)])):F("",!0),t(i)?(r(),f("div",re,[y(t(J),{variant:"outline-primary",onClick:A,disabled:t(v)},{default:x(()=>[...s[0]||(s[0]=[M("查看更多",-1)])]),_:1},8,["disabled"])])):F("",!0),s[1]||(s[1]=m("br",null,null,-1)),s[2]||(s[2]=m("br",null,null,-1))])}}};export{ye as default};
