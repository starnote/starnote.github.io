import{_ as A}from"./BoVrpOHB.js";import{f as D}from"./DFMnQmrK.js";import{l as H}from"./YlgW88SJ.js";import{u as L}from"./D1wmksbD.js";import{u as O}from"./w5O4aCFK.js";import{g as C}from"./Dgk4jJtj.js";import{ah as q,ax as z,e as o,ai as i,aj as n,an as _,am as u,ao as a,R as E,at as R,ak as c,al as g,aq as w,av as B,ad as S}from"./BJi9F7T9.js";import"./BJ2ClxiI.js";const X={"p-t-1":""},G={class:"article"},I={"text-size-3":"","m-r-3":""},J={key:1,"text-center":""},K=["src"],M={key:2,"text-center":"","m-b-10":""},se={__name:"notes",async setup(P){let m,k,{message:h}=q(["message"]);L({title:"文章列表"});let x=O("user").value.username,s=[],f=o(),v=o(!1),d=o(!1),l=o(!0),y=20,F=20,b=o(0);const{data:N,pending:T,error:U}=([m,k]=z(()=>C("/starnoteapi/personnotes/@"+x+"/0")),m=await m,k(),m);if(N.value){let r=N.value.result;l.value=!1;for(let e in r)s.push(r[e]);f.value=s,s.length==y&&(d.value=!0)}const V=async()=>{l.value=!0,d.value=!1,v.value=!0,b.value+=F;const{data:r,pending:e,error:p}=await C("/starnoteapi/personnotes/@"+x+"/"+b.value);if(p.value){h.error(`失败！
`+errorX.value,{duration:5e3});return}let t=r?.value.result;if(t.length==0){h.info("没有更多数据了",{duration:5e3}),l.value=!1;return}for(let j in t)s.push(t[j]);f.value=s,l.value=!1,v.value=!1,t.length==y&&(d.value=!0)};return(r,e)=>{const p=A;return n(),i("div",X,[a(T)?_("",!0):(n(!0),i(E,{key:0},R(a(f),t=>(n(),i("div",G,[c(p,{to:"/user/"+t.permlink},{default:g(()=>[...e[0]||(e[0]=[u("div",{class:"i-mdi-playlist-edit","text-6":"","mr-2":""},null,-1)])]),_:1},8,["to"]),c(p,{to:"/note/@"+t.author+"/"+t.permlink},{default:g(()=>[u("span",I,B(("formatTime"in r?r.formatTime:a(D))(t.created)),1),w(B(t.title),1)]),_:2},1032,["to"])]))),256)),a(l)?(n(),i("div",J,[u("img",{src:a(H),alt:"miao loading"},null,8,K)])):_("",!0),a(d)?(n(),i("div",M,[c(a(S),{variant:"outline-primary",onClick:V,disabled:a(v)},{default:g(()=>[...e[1]||(e[1]=[w("查看更多",-1)])]),_:1},8,["disabled"])])):_("",!0),e[2]||(e[2]=u("br",null,null,-1)),e[3]||(e[3]=u("br",null,null,-1))])}}};export{se as default};
