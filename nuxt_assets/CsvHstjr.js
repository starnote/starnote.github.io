import{_ as V}from"./biAMTF3B.js";import{_ as A}from"./HJKNPorm.js";import{_ as C}from"./BoVrpOHB.js";import{l as D}from"./YlgW88SJ.js";import{u as E}from"./D1wmksbD.js";import{aA as L,i as P,ap as R,ah as $,a3 as j,e as h,ai as d,aj as i,an as N,am as f,ao as s,ak as g,al as k,R as G,at as H,az as K,av as T,aq as q,ad as z}from"./BJi9F7T9.js";import{g as I}from"./Dgk4jJtj.js";import{N as J,a as M}from"./I0NwMbPM.js";import"./BJ2ClxiI.js";import"./Bk_rJcZu.js";import"./C5Ksf8W7.js";const O="$s";function Q(...u){const x=typeof u[u.length-1]=="string"?u.pop():void 0;typeof u[0]!="string"&&u.unshift(x);const[e,a]=u;if(!e||typeof e!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+e);if(a!==void 0&&typeof a!="function")throw new Error("[nuxt] [useState] init must be a function: "+a);const m=O+e,c=L(),p=P(c.payload.state,m);if(p.value===void 0&&a){const n=a();if(R(n))return c.payload.state[m]=n,n;p.value=n}return p}const U={subContainer:""},W={key:0},X={key:1},Y={key:2,class:"bottomback"},Z={class:"notestyle"},ee=["src"],te={"text-center":""},ae={key:3,"text-center":""},oe=["src"],se={key:4,"text-center":"","m-b-10":""},_e={__name:"index",setup(u){let{message:x}=$(["message"]);E({title:"星空笔记"});let e=[],a=h(),m=h(!1),c=h(!1),p=h(!0),n=h(null),b=h(!1),w=20;const y=Q("created"),S=async()=>{const{data:r,pending:t,error:l}=await I("/starnoteapi/starnotes/"+w+"/0");if(l.value&&x.error(`失败！
`+l.value,{duration:5e3}),r.value){p.value=!1;let o=r.value.result;for(let v in o)e.push(o[v]);a.value=e,console.log(698,"history",a.value),y.value=e,e.length==w&&(c.value=!0)}},F=async()=>{b.value=!0,c.value=!1,m.value=!0;let r=JSON.stringify({tag:"hive-105017",limit:w,author:author.value,permlink:permlink.value});const t=await fetchPost("/hiveapi/getcreated",r);if(t.ok){let o=(await t.json()).result;for(let v in o)e.push(o[v]);a.value=e,author.value=o[o.length-1].author,permlink.value=o[o.length-1].permlink,console.log(336,"end",author.value,permlink.value),y.value=e,b.value=!1,c.value=!0,m.value=!1}else{const l=await t.text();b.value=!1,n.value=l,x.error(`错误！
`+l,{duration:5e3})}};return j(()=>{if(y.value){p.value=!1,a.value=y.value;let r=y.value;for(let t in r)e.push(r[t])}else S()}),(r,t)=>{const l=V,o=A,v=C;return i(),d("div",U,[s(p)?(i(),d("div",W,[g(l)])):s(n)?(i(),d("div",X,[g(o,{error:s(n)},null,8,["error"])])):(i(),d("div",Y,[f("div",null,[g(s(M),{"x-gap":"20",cols:"16","item-responsive":"",responsive:"screen"},{default:k(()=>[(i(!0),d(G,null,H(s(a),(_,B)=>(i(),K(s(J),{span:"8 l:4",key:B},{default:k(()=>[f("div",Z,[g(v,{to:"/note/@"+_.author+"/"+_.permlink},{default:k(()=>[f("img",{width:"98%","mt-3":"",src:_.coverimg,"rounded-2":""},null,8,ee)]),_:2},1032,["to"]),g(v,{to:"/note/@"+_.author+"/"+_.permlink},{default:k(()=>[f("p",te,T(_.title),1)]),_:2},1032,["to"])])]),_:2},1024))),128))]),_:1})])])),s(b)?(i(),d("div",ae,[f("img",{src:s(D),alt:"miao loading"},null,8,oe)])):N("",!0),s(c)?(i(),d("div",se,[g(s(z),{variant:"outline-primary",onClick:F,disabled:s(m)},{default:k(()=>[...t[0]||(t[0]=[q("查看更多",-1)])]),_:1},8,["disabled"])])):N("",!0),t[1]||(t[1]=f("br",null,null,-1)),t[2]||(t[2]=f("br",null,null,-1))])}}};export{_e as default};
