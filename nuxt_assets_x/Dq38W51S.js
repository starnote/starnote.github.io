import{_ as A}from"./BaWOGN4U.js";import{f as D}from"./Lu71_EbE.js";import{l as H}from"./Dzd8AvIU.js";import{u as L}from"./Cmxlb512.js";import{u as O}from"./BDcvvZjf.js";import{g as C}from"./BSx2foOQ.js";import{ah as q,ax as z,e as i,ai as s,aj as l,an as v,am as n,ao as a,R as E,at as R,ak as c,al as g,aq as w,av as B,ad as S}from"./B6y6aho5.js";import"./BJ2ClxiI.js";const X={"p-t-1":""},G={class:"article"},I={"text-size-3":"","m-r-3":""},J={key:1,"text-4.5":"","m-y-4":"","m-l-10":""},K={key:2,"text-center":""},M=["src"],P={key:3,"text-center":"","m-b-10":""},le={__name:"notes",async setup(Q){let u,k,{message:h}=q(["message"]);L({title:"笔记列表"});let y=O("user").value.username,m=[],d=i(),_=i(!1),p=i(!1),o=i(!0),x=20,F=20,b=i(0);const{data:N,pending:T,error:W}=([u,k]=z(()=>C("/starnoteapi/personnotes/@"+y+"/0")),u=await u,k(),u);if(N.value){let r=N.value.result;o.value=!1;for(let e in r)m.push(r[e]);d.value=m,r.length==x&&(p.value=!0)}const V=async()=>{o.value=!0,p.value=!1,_.value=!0,b.value+=F;const{data:r,pending:e,error:f}=await C("/starnoteapi/personnotes/@"+y+"/"+b.value);if(f.value){h.error(`失败！
`+errorX.value,{duration:5e3});return}let t=r?.value.result;if(t.length==0){h.info("没有更多数据了",{duration:5e3}),o.value=!1;return}for(let j in t)m.push(t[j]);d.value=m,o.value=!1,_.value=!1,t.length==x&&(p.value=!0)};return(r,e)=>{const f=A;return l(),s("div",X,[a(T)?v("",!0):(l(!0),s(E,{key:0},R(a(d),t=>(l(),s("div",G,[c(f,{to:"/user/"+t.permlink},{default:g(()=>[...e[0]||(e[0]=[n("div",{class:"i-mdi-playlist-edit","text-6":"","mr-2":""},null,-1)])]),_:1},8,["to"]),c(f,{to:"/note/@"+t.author+"/"+t.permlink},{default:g(()=>[n("span",I,B(("formatTime"in r?r.formatTime:a(D))(t.created)),1),w(B(t.title),1)]),_:2},1032,["to"])]))),256)),a(d).length==0?(l(),s("div",J,"暂没有笔记！")):v("",!0),a(o)?(l(),s("div",K,[n("img",{src:a(H),alt:"miao loading"},null,8,M)])):v("",!0),a(p)?(l(),s("div",P,[c(a(S),{variant:"outline-primary",onClick:V,disabled:a(_)},{default:g(()=>[...e[1]||(e[1]=[w("查看更多",-1)])]),_:1},8,["disabled"])])):v("",!0),e[2]||(e[2]=n("br",null,null,-1)),e[3]||(e[3]=n("br",null,null,-1))])}}};export{le as default};
