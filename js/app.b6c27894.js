(function(t){function e(e){for(var n,o,i=e[0],l=e[1],c=e[2],m=0,d=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,i=1;i<r.length;i++){var l=r[i];0!==a[l]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},a={app:0},s=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push([1,"chunk-vendors"]),r()})({0:function(t,e){},"034f":function(t,e,r){"use strict";var n=r("5369"),a=r.n(n);a.a},"0d50":function(t,e,r){},1:function(t,e,r){t.exports=r("56d7")},10:function(t,e){},"15cf":function(t,e,r){"use strict";var n=r("df0a"),a=r.n(n);a.a},2:function(t,e){},"2e4b":function(t,e,r){},3:function(t,e){},"35f8":function(t,e,r){"use strict";var n=r("6f0a"),a=r.n(n);a.a},4:function(t,e){},"43a7":function(t,e,r){"use strict";var n=r("ef33"),a=r.n(n);a.a},4402:function(t,e,r){},"4eda":function(t,e,r){"use strict";var n=r("ecf3"),a=r.n(n);a.a},5:function(t,e){},5369:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("2d98"),r("041d"),r("3466"),r("c412");var n=r("6e6d"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("b-navbar",{staticClass:"navmanu",attrs:{toggleable:"lg",type:"light"}},[n("b-navbar-brand",{on:{click:t.backtoindex}},[n("img",{staticClass:"d-inline-block align-top",attrs:{src:r("950d"),alt:"StarNote"}})]),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",{staticClass:"ml-auto"},[n("router-link",{attrs:{to:"/"}},[t._v("主页")]),n("router-link",{attrs:{to:"/title"}},[t._v("新建主题")]),this.$store.state.username?n("div",[n("a",{attrs:{href:"#"}},[t._v("@"+t._s(this.$store.state.username))]),n("a",{attrs:{href:"#"},on:{click:t.logout}},[t._v("注销")])]):n("div",[n("a",{attrs:{href:"https://signup.steemit.com",target:"_blank"}},[t._v("注册")]),n("router-link",{attrs:{to:"/login"}},[t._v("登录")])],1)],1)],1)],1),n("router-view"),n("Footer")],1)},s=[],o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"myfooter"},[r("b-container",{staticClass:"bv-example-row"},[r("b-row",[r("b-col",[r("router-link",{attrs:{to:"/about"}},[t._v("关于星空笔记")])],1),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://steemitwallet.com"}},[t._v("网页钱包")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://github.com/starnote/starnote.github.io"}},[t._v("Github")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://github.com/steemit/steem-js/tree/master/doc#install"}},[t._v("开发手册")])])],1),r("b-row",[r("b-col",[r("router-link",{attrs:{to:"/newbie"}},[t._v("新手指南")])],1),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://github.com/aaroncox/vessel/releases"}},[t._v("桌面钱包")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://github.com/steem-driver/awesome-steem"}},[t._v("AwesomeSteem")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://smt.steem.com"}},[t._v("SMTs")])])],1),r("b-row",[r("b-col",[r("a",{attrs:{target:"_blank",href:"https://steemh.org"}},[t._v("Steem指南")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://steemd.com/@"+this.$store.state.username}},[t._v("区块数据")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://steemprojects.com"}},[t._v("SteemProjects")])]),r("b-col")],1)],1),r("p",{staticClass:"info"},[t._v("Copyright©2019 星空笔记，基于Steem和IPFS的区块链笔记 @lemooljiang创建 QQ:497867999")])],1)},i=[],l={name:"Footer"},c=l,u=(r("15cf"),r("4e82")),m=Object(u["a"])(c,o,i,!1,null,"34b6e748",null),d=m.exports,p={name:"App",data:function(){return{username:"",password:"",keywords:""}},methods:{backtoindex:function(){this.$router.push({path:"/"})},logout:function(){this.$store.commit("clearUser")}},filters:{formatTime:function(t){return t.substring(0,10)}},components:{Footer:d},mounted:function(){if(null!=localStorage.getItem("autostart")){console.log(222,"开始点赞啦！");var t=JSON.parse(localStorage.getItem("authors"));this.getDataAndVote(t)}}},f=p,h=(r("034f"),Object(u["a"])(f,a,s,!1,null,null,null)),g=h.exports,b=r("c478"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"starnote"}},[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),n("div",{staticClass:"article"},t._l(t.search(t.keywords),(function(e,a){return n("div",{staticClass:"content"},[n("a",{staticClass:"titleclass",on:{click:function(r){return t.showChapter(a,e.permlink)}}},[n("img",{attrs:{src:r("cdd9"),alt:"StarNote"}}),t._v(" "+t._s(e.title)+" "),n("p",{staticClass:"posttime"},[t._v(t._s(t._f("formatTime")(e.created))+" ")])]),n("b-button",{staticClass:"edittitle",attrs:{variant:"outline-primary"},on:{click:function(r){return t.edit(a,e)}}},[t._v("编辑")]),n("p",{directives:[{name:"show",rawName:"v-show",value:!t.editFlag[a],expression:"!editFlag[key]"}]},[t._v("摘要："+t._s(e.body))]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.editFlag[a],expression:"editFlag[key]"}]},[n("div",{attrs:{id:"main"}},[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",attrs:{id:"inline-form-input-name",placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),n("b-form-textarea",{attrs:{id:"textarea",rows:"3","max-rows":"6"},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1),n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(r){return t.refresh(a,e)}}},[t._v("更新")]),n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.editclear(a)}}},[t._v("取消")])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.flag[a],expression:"flag[key]"}]},[t._l(t.chapters,(function(t,e){return n("div",[n("Replylist",{attrs:{parentmsg:t,ckey:e}})],1)})),n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(r){return t.addChapter(e.author,e.permlink,e)}}},[t._v("新增章节")]),t.addFlag?n("div",[n("div",{attrs:{id:"main2"}},[n("div",{staticClass:"subtitle"},[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",attrs:{id:"inline-form-input-name",placeholder:"请输入章节名"},model:{value:t.subtitle,callback:function(e){t.subtitle=e},expression:"subtitle"}})],1),n("div",{attrs:{id:"main3"}},[n("mavon-editor",{ref:"md",refInFor:!0,staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1)]),n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(r){return t.postChapter(e.author,e.permlink,e)}}},[t._v("提交")]),n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.clear}},[t._v("取消")])],1):t._e()],2)],1)})),0),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},k=[],w=(r("6799"),r("8bc6"),r("01d3"),r("ad15"),r("ff52"),r("95a7"),r("280d"),r("a27f"),r("63ff"),r("1228")),_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"loading"})},x=[],y={name:"Loading"},$=y,S=(r("7f16"),Object(u["a"])($,_,x,!1,null,"38280d7f",null)),j=S.exports,C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"item"},[r("div",{staticClass:"child"},[r("a",{staticClass:"subtitle",on:{click:function(e){return t.show(t.ckey)}}},[r("div",{staticClass:"titledown"},[t._v("> "+t._s(t.parentmsg.title)+" ")])]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.flag[t.ckey],expression:"flag[ckey]"}]},[r("mavon-editor",{staticClass:"replymd",attrs:{value:t.parentmsg.body,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,boxShadow:!1,scrollStyle:t.prop.scrollStyle}}),r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.edit(t.parentmsg)}}},[t._v("编辑")])],1)]),t.editFlag?r("div",[r("div",{attrs:{id:"main"}},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",attrs:{id:"inline-form-input-name",placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.imgAdd},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.refresh(t.parentmsg)}}},[t._v("更新")]),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.clear}},[t._v("取消")])],1):t._e()])},P=[],O={name:"Replylist",data:function(){return{title:"",text:"",editFlag:!1,key:"",flag:[]}},methods:{edit:function(t){this.editFlag=!0,this.title=t.title,this.text=t.body},refresh:function(t){console.log(135,t),this.editFlag=!1,this.$set(t,"title",this.title),this.$set(t,"body",this.text);var e=this.$store.state.password,r=this.$store.state.username,n=t.parent_author,a=t.parent_permlink,s=t.permlink,o=this.title,i=this.text,l=t.json_metadata,c={id:t.id,title:o,author:r,permlink:s,parent_author:n,parent_permlink:a,body:i,created:(new Date).toISOString().split(".")[0],json_metadata:JSON.stringify(l)};this.putChapterDB(c),this.postToSteem(e,n,a,r,s,o,i,l)},putChapterDB:function(t){var e=this.$store.state.db,r=this.$store.state.username+"chapter",n=e.transaction([r],"readwrite");n.oncomplete=function(t){console.log("533,事务操作完成")},n.onerror=function(t){console.log("事务操作出错"),console.dir(t)},n.onsuccess=function(t){console.log("事务操作成功")};var a=n.objectStore(r);a.put(t)},clear:function(){this.replyFlag=!1,this.editFlag=!1,this.text=""},show:function(t){this.$set(this.flag,t,!this.flag[t])}},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},mounted:function(){for(var t=0;t<this.parentmsg.length;t++)this.flag[t]=!1},props:["parentmsg","ckey"]},F=O,D=(r("a3a2"),Object(u["a"])(F,C,P,!1,null,"1f4dcbaf",null)),A=D.exports,I={name:"Index",data:function(){return{keywords:"",isLoading:!1,flag:[],res:[],temp:[],chapters:[],addFlag:!1,editFlag:[],title:"",body:"",subtitle:"",text:""}},methods:{edit:function(t,e){this.$set(this.editFlag,t,!this.editFlag[t]);for(var r=this.$store.state.posts,n=0;n<r.length;n++)t!=n&&this.$set(this.editFlag,n,!1);this.title=e.title,this.body=e.body},refresh:function(t,e){this.$set(this.editFlag,t,!1),this.$set(e,"title",this.title),this.$set(e,"body",this.body);var r=this.$store.state.password,n=this.$store.state.username,a="",s="starnote",o=e.permlink,i=this.title,l=this.body,c=e.json_metadata,u={id:e.id,title:i,author:n,permlink:o,body:l,created:(new Date).toISOString().split(".")[0],json_metadata:JSON.stringify(c)};this.putTitleDB(u),this.postToSteem(r,a,s,n,o,i,l,c)},putTitleDB:function(t){var e=this.$store.state.db,r=this.$store.state.username+"title",n=e.transaction([r],"readwrite");n.oncomplete=function(t){console.log("533,事务操作完成")},n.onerror=function(t){console.log("事务操作出错"),console.dir(t)},n.onsuccess=function(t){console.log("事务操作成功")};var a=n.objectStore(r);a.put(t)},editclear:function(t){this.$set(this.editFlag,t,!1),this.title=this.body=""},getSteemPosts:function(t,e,r,n){var a="2019-12-11T06:40:27",s=this;return new Promise((function(o,i){var l=(new Date).toISOString().split(".")[0];s.steem.api.getDiscussionsByAuthorBeforeDate(t,e,l,r,(function(l,c){var u=[];c.forEach((function(t){t.permlink!==e&&u.push(t)})),n=[].concat(Object(w["a"])(n),u),c.length>1&&c[c.length-1].created>a?s.getSteemPosts(t,c[c.length-1].permlink,r,n).then(o).catch(i):o(n)}))}))},filterPosts:function(t){var e=[];return t.forEach((function(t){"starnote"===t.category&&e.push(t)})),console.log(666,e),e},savePosts:function(t,e){var r=this,n=this.$store.state.username+"title",a=t.transaction([n],"readwrite");return new Promise((function(t){a.oncomplete=function(e){console.log("111, 事务操作完成"),t()},a.onerror=function(t){console.log("事务操作出错"),console.dir(t)},a.onsuccess=function(t){console.log("222, 事务操作成功")};for(var s=a.objectStore(n),o=e.length-1;o>-1;o--)s.add(e[o]);var i=r.$store.state.username;localStorage.setItem(i,"starnote")}))},saveChapters:function(t,e,r){var n=this.$store.state.username+"chapter",a=t.transaction([n],"readwrite");return new Promise((function(t){a.oncomplete=function(e){console.log("121, 事务操作完成"),t()},a.onerror=function(t){console.log("事务操作出错"),console.dir(t)},a.onsuccess=function(t){console.log("222, 事务操作成功")};for(var s=a.objectStore(n),o=0;o<e.length;o++)s.add(e[o]);var i=r;localStorage.setItem(i,"starnote")}))},search:function(t){var e=this.$store.state.posts;return e.filter((function(e){if(e.title.includes(t))return e}))},showChapter:function(t,e){this.chapters=[],this.$set(this.flag,t,!this.flag[t]);for(var r=this.$store.state.posts,n=0;n<r.length;n++)t!=n&&this.$set(this.flag,n,!1);var a=this.$store.state.db,s=this.$store.state.username,o=this,i=e;if(null==localStorage.getItem(i)){var l=function(t,e){var r,n,s=arguments;return regeneratorRuntime.async((function(l){while(1)switch(l.prev=l.next){case 0:return s.length>2&&void 0!==s[2]?s[2]:[],l.next=3,regeneratorRuntime.awrap(o.steem.api.getContentRepliesAsync(t,e));case 3:if(r=l.sent,n=[],!(r.length>1)){l.next=12;break}return r.forEach((function(e){e.author===t&&n.push(e)})),o.chapters=n,l.next=10,regeneratorRuntime.awrap(o.saveChapters(a,n,e));case 10:l.next=13;break;case 12:localStorage.setItem(i,"starnote");case 13:case"end":return l.stop()}}))};l(s,e)}else{console.log(566,"从数据库取");var c=this;this.getAllChapters(a).then((function(t){t.forEach((function(t){t.parent_permlink===e&&c.chapters.push(t)}))}))}},addChapter:function(){this.addFlag=!0},postChapter:function(t,e,r){this.addFlag=!1;var n=this.$store.state.password,a=this.$store.state.username,s=this.getstr(),o=this.subtitle,i=this.text,l=["starnote","cn"],c={tags:l,app:"steemit/1.0",format:"markdown"},u={parent_author:t,parent_permlink:e,title:o,author:a,permlink:s,body:i,created:(new Date).toISOString().split(".")[0],json_metadata:JSON.stringify(c)};this.chapters.push(u);var m=this.$store.state.db,d=this.$store.state.username+"chapter",p=m.transaction([d],"readwrite");p.oncomplete=function(t){console.log("233，事务操作完成")},p.onerror=function(t){console.log("事务操作出错"),console.dir(t)},p.onsuccess=function(t){console.log("事务操作成功")};var f=p.objectStore(d);f.add(u),this.postToSteem(n,t,e,a,s,o,i,c),this.subtitle=this.text=""},clear:function(){this.addFlag=!1,this.editFlag=!1,this.text=""},uploadimg:function(t,e){this.imgAdd(t,e)}},filters:{formatTime:function(t){return t.substring(0,10)}},components:{Loading:j,Replylist:A},watch:{temp:function(){this.chapters=this.temp}},mounted:function(){var t=this;function e(){var e,r,n,a,s;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:if(!t.$store.state.username){o.next=32;break}if(null!=localStorage.getItem(t.$store.state.username)){o.next=27;break}return console.log(166,"第一次登录"),t.isLoading=!0,o.next=6,regeneratorRuntime.awrap(t.getSteemPosts(t.$store.state.username,null,100,[]));case 6:if(e=o.sent,r=t.filterPosts(e),console.log(888,r),!(r.length>0)){o.next=21;break}return t.$store.commit("savePosts",r),o.next=13,regeneratorRuntime.awrap(t.initDatabase());case 13:return n=o.sent,t.$store.commit("saveDB",n),o.next=17,regeneratorRuntime.awrap(t.savePosts(n,r));case 17:for(t.isLoading=!1,a=0;a<e.length;a++)t.flag[a]=!1;o.next=25;break;case 21:t.isLoading=!1,s=this.$store.state.username,localStorage.setItem(s,"starnote"),alert("请创建主题");case 25:o.next=30;break;case 27:if(0!=t.$store.state.posts){o.next=30;break}return o.next=30,regeneratorRuntime.awrap(function(){var e,r,n,a,s,o,i,l,c,u,m,d;return regeneratorRuntime.async((function(p){while(1)switch(p.prev=p.next){case 0:return p.next=2,regeneratorRuntime.awrap(t.initDatabase());case 2:return e=p.sent,t.$store.commit("saveDB",e),p.next=6,regeneratorRuntime.awrap(t.getAllPosts(e));case 6:for(r=p.sent,t.$store.commit("savePosts",r.reverse()),n=0;n<r.length;n++)t.flag[n]=!1;for(a=0;a<r.length;a++)t.editFlag[a]=!1;s=r[0].created,o=[],r.forEach((function(t){o.push(t.permlink)})),i=t.$store.state.username,l=(new Date).toISOString().split(".")[0],c=[],u=null;case 17:return p.next=20,regeneratorRuntime.awrap(t.steem.api.getDiscussionsByAuthorBeforeDateAsync(i,u,l,10));case 20:if(m=p.sent,!(s<m[0].created&&-1===o.indexOf(m[0].permlink))){p.next=29;break}if(m.forEach((function(t){"starnote"===t.category&&-1===o.indexOf(t.permlink)&&c.push(t)})),u=m[m.length-1].permlink,!(s>m[m.length-1].created)){p.next=27;break}return console.log(233,"没有更新的主题"),p.abrupt("break",33);case 27:p.next=31;break;case 29:return console.log(133,"没有新主题"),p.abrupt("break",33);case 31:p.next=17;break;case 33:if(!(c.length>0)){p.next=41;break}return p.next=36,regeneratorRuntime.awrap(t.savePosts(e,c));case 36:return console.log(544,"添加新主题成功！"),p.next=39,regeneratorRuntime.awrap(t.getAllPosts(e));case 39:d=p.sent,t.$store.commit("savePosts",d.reverse());case 41:case"end":return p.stop()}}))}());case 30:o.next=33;break;case 32:t.$router.push({path:"/login"});case 33:case"end":return o.stop()}}),null,this)}e()}},R=I,B=(r("4eda"),Object(u["a"])(R,v,k,!1,null,"40f9ab5f",null)),E=B.exports,N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login"},[r("h2",[t._v("用户登录")]),r("div",[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{id:"inline-form-input-name",placeholder:"请输入用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{id:"inline-form-input-password",type:"password",placeholder:"请输入发贴密钥（posting key）"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),r("div",{staticClass:"loginbtn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.login}},[t._v("登录")])],1),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)])},T=[],L={name:"Login",data:function(){return{username:"",password:"",isLoading:!1}},methods:{login:function(){this.isLoading=!0;var t=this,e=this.username;this.steem.api.getAccountHistory(e,0,0,(function(e,r){0===r.length&&(t.isLoading=!1,alert("用户不存在！"))})),this.steem.api.getAccounts([t.username],(function(e,r){var n,a=r[0].posting.key_auths[0][0],s=t.password;try{n=t.steem.auth.wifIsValid(s,a)}catch(o){n="false"}!0===n?(t.isLoading=!1,t.$store.commit("saveUser",{username:t.username,password:s}),t.$router.push({path:"/"})):alert("错误！请检查用户名和发贴密钥！")}))}},components:{Loading:j}},q=L,M=(r("35f8"),Object(u["a"])(q,N,T,!1,null,"0b2fa036",null)),J=M.exports,U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"maintop"}},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",attrs:{id:"inline-form-input-name",placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),r("div",{attrs:{id:"main"}},[r("b-form-textarea",{attrs:{id:"textarea",placeholder:"请输入摘要",rows:"3","max-rows":"6"},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1),r("br"),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"inline-form-input-name",placeholder:"tags  (输入英文标签，以空格分隔)"},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}}),r("div",{staticClass:"btn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.post}},[t._v("提交")])],1)],1)},V=[],z=(r("5e0a"),{name:"Post",data:function(){return{db:{},body:"",title:"",tags:""}},methods:{post:function(){var t=this.$store.state.password,e="",r="starnote",n=this.$store.state.username,a=this.getstr(),s=this.title,o=this.body,i="starnote "+this.tags,l=i.trim().split(/\s+/),c={tags:l,app:"steemit/1.0",format:"markdown"};this.postToSteem(t,e,r,n,a,s,o,c);var u={title:s,author:n,permlink:a,parent_author:"",parent_permlink:"starnote",category:"starnote",body:o,created:(new Date).toISOString().split(".")[0],json_metadata:JSON.stringify(c)},m=this,d=this.$store.state.db,p=this.$store.state.username+"title";function f(){return new Promise((function(t){var e=d.transaction([p],"readwrite");e.oncomplete=function(t){console.log("事务操作完成")},e.onerror=function(t){console.log("事务操作出错"),console.dir(t)},e.onsuccess=function(t){console.log("事务操作成功")};var r=e.objectStore(p);r.add(u),t()}))}function h(){var t;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(f());case 2:return e.next=4,regeneratorRuntime.awrap(m.getAllPosts(d));case 4:t=e.sent,m.$store.commit("savePosts",t.reverse()),m.$router.push({path:"/"});case 7:case"end":return e.stop()}}))}h()}},mounted:function(){var t=this;function e(){var e,r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.$store.state.username){n.next=12;break}if(0!=t.$store.state.posts){n.next=10;break}return n.next=4,regeneratorRuntime.awrap(t.initDatabase());case 4:return e=n.sent,t.$store.commit("saveDB",e),n.next=8,regeneratorRuntime.awrap(t.getAllPosts(e));case 8:r=n.sent,t.$store.commit("savePosts",r.reverse());case 10:n.next=13;break;case 12:t.$router.push({path:"/login"});case 13:case"end":return n.stop()}}))}e()}}),Q=z,K=(r("43a7"),Object(u["a"])(Q,U,V,!1,null,"9ed57588",null)),W=K.exports,G=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},H=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"content"}},[r("h1",[t._v("关于星空笔记")]),r("img",{attrs:{src:"https://www.steemjiang.com:8081/ipfs/Qmf1KNVAxc3oEmYTWnu2NrCKCkhs6xVkCbuRsd2F8Asmbq",alt:"星空笔记"}}),r("br"),r("br"),t._v(" 星空笔记，基于Steem和IPFS的区块链笔记，@lemooljiang创建。数据存储在Steem区块链上，图片存在IPFS网络中，前端则使用IndexedDB数据库，几者相结合，有着神奇的效果！"),r("br"),r("br"),t._v(" 星空笔记是一个去中心的应用！ 它和比特币的离线钱包类似，可以很方便地在本地构建，无需服务器。"),r("br"),r("br"),t._v(" 当然，为了方便大家使用，我把它上传到github page中，大家可以直接访问：https://starnote.github.io"),r("br"),r("br"),r("h4",[t._v("本地构建说明")]),t._v(" 本地环境：Apache 或 Nginx"),r("br"),t._v(" 仓库地址： https://github.com/starnote/starnote.github.io"),r("br"),t._v(" 将仓库中的“index.html” 和 “static” 下载到本地，放进Apache 或 Nginx的根目录即可，http://localhost"),r("br"),r("br")])}],Y={name:"About",data:function(){return{}},mounted:function(){}},X=Y,Z=(r("f4c6"),Object(u["a"])(X,G,H,!1,null,"1687e63e",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"content"}},[r("h1",[t._v("新手生存指南")]),t._m(0),r("div",{staticClass:"newtext"},[r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/3f5j36-steem",target:"_blank"}},[t._v("1、steem介绍")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/4xxuhj",target:"_blank"}},[t._v("2、翻墙注册（更新版）")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/4kkmhd",target:"_blank"}},[t._v("3、发贴赚钱")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/4mddsq",target:"_blank"}},[t._v("4、图文编辑三板斧（更新版）")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/3xqvw9",target:"_blank"}},[t._v("5、工具红宝书")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/supload",target:"_blank"}},[t._v("6、新图床supload，顺便赚点比特币")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/p",target:"_blank"}},[t._v("7、P图神技")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/3xem6o",target:"_blank"}},[t._v("8、快速查询及归类")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/3s29oy",target:"_blank"}},[t._v("9、勤于打扫，与垃圾号绝交")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/6hgzux",target:"_blank"}},[t._v("10、一分钟注册新帐户（需要付费）")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/markdown-steemit",target:"_blank"}},[t._v("11、Markdown语法规范")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/4rxtdx",target:"_blank"}},[t._v("12、好玩的表情包和字体图标")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/km1n4",target:"_blank"}},[t._v("13、极速提现")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/6jrje-steemit",target:"_blank"}},[t._v("14、steemit上的长跑")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/2dfqrq",target:"_blank"}},[t._v("15、密码即一切")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/steem-dapp",target:"_blank"}},[t._v("16、基于steem的应用DAPP")]),r("br")],1)])},rt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",{staticStyle:{"margin-left":"15%"}},[r("img",{attrs:{src:"https://i.loli.net/2019/11/24/bsO5WDuaBonL7Uv.jpg",alt:"steem",id:"newbie"}})])}],nt={name:"Newbie",data:function(){return{}},mounted:function(){}},at=nt,st=(r("f0bc"),Object(u["a"])(at,et,rt,!1,null,"1345dcd4",null)),ot=st.exports;n["default"].use(b["a"]);var it=[{path:"/",name:"index",component:E},{path:"/title",name:"title",component:W},{path:"/login",name:"login",component:J},{path:"/about",name:"about",component:tt},{path:"/newbie",name:"newbie",component:ot}],lt=new b["a"]({mode:"history",base:"/",routes:it}),ct=lt,ut=r("08c1"),mt=r("facc"),dt=r.n(mt);n["default"].use(ut["a"]);var pt=new ut["a"].Store({state:{username:dt.a.get("username"),password:dt.a.get("password"),posts:[],db:{}},mutations:{saveUser:function(t,e){t.username=e.username,t.password=e.password,dt.a.set("username",e.username,"30d"),dt.a.set("password",e.password,"30d")},savePosts:function(t,e){t.posts=e},saveDB:function(t,e){t.db=e},clearUser:function(t){t.username=null,t.password=null,dt.a.remove("username"),dt.a.remove("password")}},actions:{},modules:{}}),ft=r("6f38"),ht=(r("d52a"),r("edc9"),r("2427")),gt=r.n(ht),bt=r("9584"),vt=r.n(bt),kt=(r("9bad"),r("f64c")),wt=r.n(kt),_t=r("4fce"),xt=r.n(_t),yt=function(){function t(t,e){for(var r="",n=t;n>0;--n)r+=e[Math.floor(Math.random()*e.length)];return r}return t(5,"0123456789abcdefghijklmnopqrstuvwxyz")},$t=r("a352"),St=function(){var t,e,r=this.$store.state.username,n=this.$store.state.username+"title",a=this.$store.state.username+"chapter",s=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB;return s||alert("你的浏览器不支持IndexedDB!\n建议使用brave、 chrome 、opera等浏览器！"),new Promise((function(o){e=s.open(r,1),e.onupgradeneeded=function(e){if(console.log("数据库创建或更新"),t=e.target.result,!t.objectStoreNames.contains(n)){var r=t.createObjectStore(n,{keyPath:"id",autoIncrement:!0});r.createIndex("title","title",{unique:!1})}if(!t.objectStoreNames.contains(a)){var s=t.createObjectStore(a,{keyPath:"id",autoIncrement:!0});s.createIndex("title","title",{unique:!1})}},e.onsuccess=function(e){t=e.target.result,console.log(666,"db版本号",t.version),t.onerror=function(t){alert("Database error:"+t.target.errorCode),console.dir(t.target)},o(t)},e.onerror=function(t){console.log(t,"数据库打开错误")}}))},jt=function(t){var e=this.$store.state.username+"title",r=t.transaction([e],"readwrite"),n=r.objectStore(e),a=[];return new Promise((function(t){n.openCursor().onsuccess=function(e){var r=e.target.result;r?(a.push(r.value),r.continue()):t(a)},n.openCursor().onerror=function(t){console.dir(t)}}))},Ct=function(t){var e=this.$store.state.username+"chapter",r=t.transaction([e],"readwrite"),n=r.objectStore(e),a=[];return new Promise((function(t){n.openCursor().onsuccess=function(e){var r=e.target.result;r?(a.push(r.value),r.continue()):t(a)},n.openCursor().onerror=function(t){console.dir(t)}}))},Pt=function(t,e,r,n,a,s,o,i){this.steem.broadcast.comment(t,e,r,n,a,s,o,i,(function(t,e){console.log(123456,t,e),t&&alert("错误！未能同步到Steem区块链上！\n可能因为你的RC不足，\n或是发贴间隔小于5分钟，\n或是网络不通！\n"+t)}))};n["default"].use(ft["a"]),n["default"].use(dt.a),n["default"].use(vt.a),n["default"].prototype.axios=gt.a,wt.a.api.setOptions({url:"https://anyx.io"}),n["default"].prototype.steem=wt.a;var Ot=xt()({host:"steemjiang.com",port:"9000",protocol:"http"});n["default"].prototype.ipfs=Ot,n["default"].prototype.getstr=yt,n["default"].prototype.imgAdd=$t["a"],n["default"].prototype.initDatabase=St,n["default"].prototype.getAllPosts=jt,n["default"].prototype.getAllChapters=Ct,n["default"].prototype.postToSteem=Pt,n["default"].config.productionTip=!1,new n["default"]({router:ct,store:pt,render:function(t){return t(g)}}).$mount("#app")},6:function(t,e){},"6f0a":function(t,e,r){},7:function(t,e){},"7f16":function(t,e,r){"use strict";var n=r("0d50"),a=r.n(n);a.a},8:function(t,e){},"8c5c":function(t,e,r){},9:function(t,e){},"950d":function(t,e,r){t.exports=r.p+"img/starnote.26cde6a3.svg"},a352:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return n}));r("ff52");var n=function(e,r){var n="https://www.steemjiang.com:8081/ipfs/",a=this,s=function(e){return new Promise((function(r,n){var s=t.from(e.result);a.ipfs.add(s).then((function(t){r(t[0].hash)})).catch((function(t){console.error(t),n(t)}))}))},o=new FileReader;o.readAsArrayBuffer(r),o.onloadend=function(t){s(o).then((function(t){a.$refs.md[0].$img2Url(e,n+t)}))}}}).call(this,r("fd40").Buffer)},a3a2:function(t,e,r){"use strict";var n=r("8c5c"),a=r.n(n);a.a},cdd9:function(t,e,r){t.exports=r.p+"img/star.59dd5406.svg"},df0a:function(t,e,r){},ecf3:function(t,e,r){},ef33:function(t,e,r){},f0bc:function(t,e,r){"use strict";var n=r("4402"),a=r.n(n);a.a},f4c6:function(t,e,r){"use strict";var n=r("2e4b"),a=r.n(n);a.a}});
//# sourceMappingURL=app.b6c27894.js.map