import{_ as q}from"./D5s7C-6y.js";import{_ as D}from"./C2kVt-tp.js";import{_ as L}from"./B2LDgRcB.js";import{f as H}from"./BQ-cqoMo.js";import{l as R}from"./Thp2kRjq.js";import{u as S}from"./DrN_Eq66.js";import{ah as X,as as $,e as n,Y as j,ai as r,aj as o,am as f,an as x,av as y,ao as a,ak as g,R as z,at as A,al as F,aq as N,ad as E}from"./BM3wTZ6R.js";import{g as B}from"./WPeXbDcF.js";import"./BJ2ClxiI.js";const Y={subContainer:""},G={"m-l-6":"","text-5":"","text-amber-800":""},I={key:0},J={key:1},K={key:2},M={key:0,"m-l-6":""},O={class:"article"},P={"text-size-3":"","m-r-3":""},Q={key:3,"text-center":""},U=["src"],W={key:4,"text-center":"","m-b-10":""},ue={__name:"notes",setup(Z){let{message:k}=X(["message"]);S({title:"笔记搜索页"});const w=$(),c=n(w.query.keywords);let i=[],C=20,b=n(0),u=n(),_=n(!1),d=n(!1),v=n(!1),h=n(!0);const T=async()=>{u.value=[],h.value=!0,d.value=!1;const{data:e,pending:s,error:l}=await B("/starnoteapi/search/0/?keywords="+c.value);if(l.value&&k.error(`失败！
`+l.value,{duration:5e3}),e.value){let t=e.value.result;h.value=!1,t.length>19&&(d.value=!0,_.value=!1),i=[];for(let m in t)i.push(t[m]);u.value=i}},V=async()=>{v.value=!0,d.value=!1,_.value=!0,b.value+=C;const{data:e,pending:s,error:l}=await B("/starnoteapi/search/"+b.value+"/?keywords="+c.value);if(l.value){k.error(`失败！
`+l.value,{duration:5e3});return}let t=e?.value?.result;if(t.length==0){k.info("没有更多数据了",{duration:5e3}),v.value=!1;return}for(let m in t)i.push(t[m]);u.value=i,v.value=!1,t.length>19&&(d.value=!0),_.value=!1};return j(()=>w.query.keywords,e=>{c.value=e,T()},{flush:"pre",immediate:!0,deep:!0}),(e,s)=>{const l=q,t=D,m=L;return o(),r("div",Y,[f("p",G,"关键词: "+y(a(c)),1),a(h)?(o(),r("div",I,[g(l)])):e.error?(o(),r("div",J,[g(t,{error:e.error},null,8,["error"])])):(o(),r("div",K,[a(u).length==0?(o(),r("div",M,"没有相关笔记！")):(o(!0),r(z,{key:1},A(a(u),p=>(o(),r("div",O,[g(m,{to:"/note/@"+p.author+"/"+p.permlink},{default:F(()=>[f("span",P,y(("formatTime"in e?e.formatTime:a(H))(p.created)),1),N(y(p.title),1)]),_:2},1032,["to"])]))),256))])),a(v)?(o(),r("div",Q,[f("img",{src:a(R),alt:"miao loading"},null,8,U)])):x("",!0),a(d)?(o(),r("div",W,[g(a(E),{variant:"outline-primary",onClick:V,disabled:a(_)},{default:F(()=>[...s[0]||(s[0]=[N("搜索更多",-1)])]),_:1},8,["disabled"])])):x("",!0),s[1]||(s[1]=f("br",null,null,-1)),s[2]||(s[2]=f("br",null,null,-1))])}}};export{ue as default};
